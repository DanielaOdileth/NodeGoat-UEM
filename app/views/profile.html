{% extends "./layout.html" %} {% block title %}My Profile{% endblock %} {% block content %}
<div class="row">
    <div class="col-lg-12">

        {% if updateSuccess %}
        <div class="row">
            <div class="col-lg-12">
                <div class="alert alert-dismissable alert-success">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    Profile updated successfully.
                </div>
            </div>
        </div>
        <!-- /.row -->
        {% endif %}
    </div>
</div>

{% if updateError %}
<div class="row">
    <div class="col-lg-12">
        <div class="alert alert-dismissable alert-danger">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{updateError}}
        </div>
    </div>
</div>
<!-- /.row -->
{% endif %}

<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-info">
            <div class="panel-heading">
                <h3 class="panel-title">Edit Profile</h3>
            </div>
            <div class="panel-body">
                <form role="form" method="post" action="/profile">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" class="form-control" id="firstName" name="firstName" value="{{firstName}}"
                            placeholder="Enter first name" pattern="^([a-zA-ZÀ-ÿ][a-zA-zÀ-ÿ ']{2,20}$)"
                            oninvalid="setCustomValidity('Please enter a valid name, valid characters: accent mark, spaces and letters')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" value="{{lastName}}"
                            placeholder="Enter last name" pattern="^([a-zA-ZÀ-ÿ][a-zA-zÀ-ÿ ']{2,20}$)"
                            oninvalid="setCustomValidity('Please enter a valid last name, valid characters: accent mark, spaces and letters')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="ssn">SSN</label>
                        <input type="text" class="form-control" id="ssn" name="ssn" value="{{ssn}}"
                            placeholder="Enter SSN" pattern="^(?!(000|666|9))\d{3}-(?!00)\d{2}-(?!0000)\d{4}$"
                            oninvalid="setCustomValidity('Please enter a valid SSN. Format: XXX-XX-XXXX')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="dob">Date of Birth</label>
                        <input type="date" class="form-control" id="dob" name="dob" value="{{dob}}"
                            placeholder="Enter date of birth"
                            pattern="^([0-2][0-9]|(3)[0-1])(\/)(((0)[0-9])|((1)[0-2]))(\/)\d{4}$"
                            oninvalid="setCustomValidity('Please enter a valid date. Format: dd/mm/yyyy')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="bankAcc">Bank Account #</label>
                        <input type="text" class="form-control" id="bankAcc" name="bankAcc" value="{{bankAcc}}"
                            placeholder="Enter bank account number" pattern="^[0-9]{2}(?:[0-9]{9}|-[0-9]{3}-[0-9]{6})$"
                            oninvalid="setCustomValidity('Please enter a valid bank account. Format: XX-XXX-XXXXXX')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="bankRouting">Bank Routing #</label>
                        <input type="text" class="form-control" id="bankRouting" name="bankRouting"
                            value="{{bankRouting}}" placeholder="Enter bank routing number"
                            pattern="^[0-9]{2}(?:[0-9]{9}|-[0-9]{3}-[0-9]{6}[#])$"
                            oninvalid="setCustomValidity('Please enter a bank routing. Format: XX-XXX-XXXXXX#')"
                            oninput="setCustomValidity('')">
                        <p class="help-block">Must be entered as digits with a suffix of #. For example: 0198212# </p>
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" id="address" name="address" value="{{address}}"
                            placeholder="Enter address" pattern="^[#.0-9a-zA-Z\s,-]+$"
                            oninvalid="setCustomValidity('Please enter a valid adress. characters accepted numbers, letters, #, comma and dots')"
                            oninput="setCustomValidity('')">
                    </div>
                    <div class="form-group">
                        <label for="website">Website</label>
                        <input type="text" class="form-control" id="website" name="website" value="{{website}}"
                            placeholder="https://"
                            pattern="^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$"
                            oninvalid="setCustomValidity('Please enter a valid website.')"
                            oninput="setCustomValidity('')">
                    </div>
                    <input type="hidden" name="_csrf" value="{{csrftoken}}" />
                    <button type="submit" class="btn btn-default" name="submit">Submit</button>

                    <!-- @FIXME use a properly escaped variable that matches the URL context, for example
                    refer to a firstNameSafeURLString field on the doc object set by the controller for this template -->
                    <a href="{{firstNameSafeString}}">Google search this profile by name</a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}